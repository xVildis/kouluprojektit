  <!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vieraskirja (5)</title>
	<LINK REL=stylesheet type="text/css" href="style.css">
</head>

<script type="text/javascript" src="header2.js"> </script>
<div id="sisalto">

<h1>5. Laadi runko järjestelmään</h1>
<ol>
<li><a href="vieraskirja_1.html">tehtävä</a></li>
<li><a href="vieraskirja_2.html">suunnitelma</a></li>
<li><a href="vieraskirja_3.html">tietokannan toteutus</a></li>
<li><a href="vieraskirja_4.html">käyttöliittymä</a></li>
<li><a href="vieraskirja_5.html">runko järjestelmään</a></li>
<li><a href="vieraskirja_6.html">tietojen lisäys lukijan näkymässä</a></li>
<li><a href="vieraskirja_7.html">autentikointi</a></li>
<li><a href="vieraskirja_8.html">jutun lisäys ylläpitonäkymässä</a></li>
<li><a href="vieraskirja_9.html">tietojen haku lukijan näkymässä</a></li>
<li><a href="vieraskirja_10.html">tietojen haku ylläpitonäkymässä</a></li>
<li><a href="vieraskirja_11.html">lisäykset</a></li>

</ol>
<h2>Tämän tunnin tavoite</h2>
<p>Tunnin aikana rakennetaan pääsivut sekä lukijan (index.php) että ylläpidon näkymään (admin.php).</p>

<P>Työvaiheet:</p>
<ul>
<li>Erota alku.php ja loppu.php sekä admin_alku.php ja admin_loppu.php ja tallenna ne kirjastot-kansioon</li>
<li>Laadi kirjastot-kansioon funktiot.php-tiedosto apufunktioita varten.</li>
<li>Toteuta index.php- ja admin.php-tiedostot, tallenna ne juurikansioon.</li>
</ul>

<h3>./kirjastot/alku.php</h3>
<p class="koodi">
<code><span style="color: #000000">
&lt;!DOCTYPE&nbsp;html&gt;
<br />&lt;html&gt;
<br />&lt;head&gt;
<br />&lt;title&gt;Vieraskirja&lt;/title&gt;
<br />&lt;meta&nbsp;charset=utf-8&gt;
<br />&lt;meta&nbsp;name="keywords"&nbsp;content="sivukoe,&nbsp;CSS3,&nbsp;HTML5"&gt;
<br />&lt;meta&nbsp;name="author"&nbsp;content="Leena&nbsp;Järvenkylä-Niemi"&gt;
<br />&lt;meta&nbsp;name="description"&nbsp;content="Vieraskirja"&gt;
<br />&lt;link&nbsp;rel="stylesheet"&nbsp;type="text/css"&nbsp;href="./tyyli/sivu.css"&nbsp;/&gt;
<br />&lt;/head&gt;
<br />&lt;body&gt;
<br />&lt;header&gt;
<br />
<br />&lt;div&nbsp;id="kotisivulinkki"&gt;
<br />&lt;a&nbsp;class="kotilinkki"&nbsp;href="index.php"&gt;vieraskirja&lt;/a&gt;
<br />&lt;/div&gt;
<br />
<br />&lt;nav&gt;
<br />&lt;a&nbsp;class="navilinkki"&nbsp;href="index.php?sivu=rekisteroidy"&gt;rekisteröidy&lt;/a&gt;
<br />&lt;a&nbsp;class="navilinkki"&nbsp;href="index.php?sivu=kirjaudu"&gt;kirjaudu&lt;/a&gt;
<br />&lt;/nav&gt;
<br />
<br />&lt;/header&gt;&lt;!--ylaosa&nbsp;loppuu--&gt;
<br />
<br />&lt;div&nbsp;id="keskiosa"&gt;
<br />&lt;div&nbsp;id="teksti"&gt;</span>
</code>
<h3>./kirjastot/admin_alku.php</h3>

<p class="koodi">
<code><span style="color: #000000">
&lt;!DOCTYPE&nbsp;html&gt;
<br />&lt;html&gt;
<br />&lt;head&gt;
<br />&lt;title&gt;Vieraskirja&lt;/title&gt;
<br />&lt;meta&nbsp;charset=utf-8&gt;
<br />&lt;meta&nbsp;name="keywords"&nbsp;content="sivukoe,&nbsp;CSS3,&nbsp;HTML5"&gt;
<br />&lt;meta&nbsp;name="author"&nbsp;content="Leena&nbsp;Järvenkylä-Niemi"&gt;
<br />&lt;meta&nbsp;name="description"&nbsp;content="Vieraskirja"&gt;
<br />&lt;script&nbsp;src="datetimepicker.js"&gt;&lt;/script&gt;
<br />&lt;link&nbsp;rel="stylesheet"&nbsp;type="text/css"&nbsp;href="./tyyli/sivu.css"&nbsp;/&gt;
<br />&lt;/head&gt;
<br />&lt;body&gt;
<br />&lt;header&gt;
<br />
<br />&lt;div&nbsp;id="kotisivulinkki"&gt;
<br />&lt;a&nbsp;class="kotilinkki"&nbsp;href="admin.php"&gt;vieraskirja&nbsp;-&nbsp;ylläpito&lt;/a&gt;
<br />&lt;/div&gt;
<br />
<br />&lt;nav&gt;
<br />&lt;a&nbsp;class="navilinkki"&nbsp;href="admin.php?sivu=lisaa_juttu"&gt;lisää&nbsp;juttu&lt;/a&gt;
<br />&lt;a&nbsp;class="navilinkki"&nbsp;href="admin.php?sivu=muokkaa_omia_tietoja"&gt;muokkaa&nbsp;omia&nbsp;tietoja&lt;/a&gt;
<br />&lt;a&nbsp;class="navilinkki"&nbsp;href="kirjaudu_ulos.php"&gt;kirjaudu&nbsp;ulos&lt;/a&gt;
<br />&lt;/nav&gt;
<br />
<br />&lt;/header&gt;&lt;!--ylaosa&nbsp;loppuu--&gt;
<br />
<br />&lt;div&nbsp;id="keskiosa"&gt;
<br />&lt;div&nbsp;id="teksti"&gt;</span>
</code>
<h3>./kirjastot/loppu.php</h3>
<p class="koodi">
<code><span style="color: #000000">
&lt;!--&nbsp;Sisältö&nbsp;loppuu--&gt;
<br />&lt;/div&gt;
<br />&lt;/div&gt;&lt;!--keskiosa&nbsp;loppuu--&gt;
<br />
<br />&lt;footer&gt;
<br />
<br />&lt;/footer&gt;&lt;!--alaosa&nbsp;loppuu--&gt;
<br />&lt;/body&gt;
<br />&lt;/html&gt;</span>
</code>
<h3>./kirjastot/admin_loppu.php</h3>
<p class="koodi">
<code><span style="color: #000000">
&lt;!--&nbsp;Sisältö&nbsp;loppuu--&gt;
<br />&lt;/div&gt;
<br />&lt;/div&gt;&lt;!--keskiosa&nbsp;loppuu--&gt;
<br />
<br />&lt;footer&gt;
<br />
<br />&lt;/footer&gt;&lt;!--alaosa&nbsp;loppuu--&gt;
<br />&lt;/body&gt;
<br />&lt;/html&gt;</span>
</code>

<h3>./kirjastot/funktiot.php</h3>
<p class="koodi">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">tulosta_alku</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;</span><span style="color: #DD0000">"./kirjastot/alku.php"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">date_default_timezone_set</span><span style="color: #007700">(</span><span style="color: #DD0000">"Europe/Helsinki"</span><span style="color: #007700">);&nbsp;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">tulosta_admin_alku</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;</span><span style="color: #DD0000">"./kirjastot/admin_alku.php"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">date_default_timezone_set</span><span style="color: #007700">(</span><span style="color: #DD0000">"Europe/Helsinki"</span><span style="color: #007700">);&nbsp;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">tulosta_loppu</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;</span><span style="color: #DD0000">"./kirjastot/loppu.php"</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">tulosta_admin_loppu</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;</span><span style="color: #DD0000">"./kirjastot/admin_loppu.php"</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">tulosta_sisalto</span><span style="color: #007700">(</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sallitut</span><span style="color: #007700">=array(</span><span style="color: #DD0000">'rekisteroidy'</span><span style="color: #007700">,</span><span style="color: #DD0000">'kirjaudu'</span><span style="color: #007700">,</span><span style="color: #DD0000">'juttu'</span><span style="color: #007700">,</span><span style="color: #DD0000">'kirjoittajan_jutut'</span><span style="color: #007700">,</span><span style="color: #DD0000">'etusivu'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">,</span><span style="color: #0000BB">$sallitut</span><span style="color: #007700">))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">=</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">.</span><span style="color: #DD0000">".php"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;</span><span style="color: #DD0000">"./sisalto/</span><span style="color: #0000BB">$sivu</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;require&nbsp;</span><span style="color: #DD0000">"./sisalto/etusivu.php"</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">tulosta_admin_sisalto</span><span style="color: #007700">(</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sallitut</span><span style="color: #007700">=array(</span><span style="color: #DD0000">'muokkaa_omia_tietoja'</span><span style="color: #007700">,</span><span style="color: #DD0000">'lisaa_juttu'</span><span style="color: #007700">,</span><span style="color: #DD0000">'muokkaa_juttua'</span><span style="color: #007700">,</span><span style="color: #DD0000">'admin_etusivu'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">,</span><span style="color: #0000BB">$sallitut</span><span style="color: #007700">))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">=</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">.</span><span style="color: #DD0000">".php"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;</span><span style="color: #DD0000">"./sisalto/</span><span style="color: #0000BB">$sivu</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;require&nbsp;</span><span style="color: #DD0000">"./sisalto/admin_etusivu.php"</span><span style="color: #007700">;<br />}<br /><br /></span>
</span>
</code>


<h3>./index.php</h3>
<p>Huom! Tiedosto tkfunktiot.php kannattaa toteuttaa jo nyt, vaikka sisältöä ei ole.</p>
<p class="koodi">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br />$sivu</span><span style="color: #007700">=</span><span style="color: #DD0000">"etusivu"</span><span style="color: #007700">;
<br />if(isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">"sivu"</span><span style="color: #007700">]))&nbsp;</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">=</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">"sivu"</span><span style="color: #007700">];
<br />
<br />require&nbsp;</span><span style="color: #DD0000">"./kirjastot/funktiot.php"</span><span style="color: #007700">;</span><span style="color: #FF8000">//ulkoasufunktiot&nbsp;käyttöön
<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">"./tietokanta/yhteys.php"</span><span style="color: #007700">;</span><span style="color: #FF8000">//tietokantayhteys&nbsp;käyttöön
<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">"./tietokanta/tkfunktiot.php"</span><span style="color: #007700">;</span><span style="color: #FF8000">//tietokantafuntiot&nbsp;käyttöön
<br />
<br /></span><span style="color: #0000BB">tulosta_alku</span><span style="color: #007700">();
<br />
<br /></span><span style="color: #0000BB">tulosta_sisalto</span><span style="color: #007700">(</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">);
<br />
<br /></span><span style="color: #0000BB">tulosta_loppu</span><span style="color: #007700">();
<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
<h3>./admin.php</h3>
<p>Tämä täydentyy myöhemmin autentikointia laadittaessa.</p>

<p class="koodi">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$sivu</span><span style="color: #007700">=</span><span style="color: #DD0000">"admin_etusivu"</span><span style="color: #007700">;<br />if(isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">"sivu"</span><span style="color: #007700">]))&nbsp;</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">=</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">"sivu"</span><span style="color: #007700">];<br /><br />require&nbsp;</span><span style="color: #DD0000">"./kirjastot/funktiot.php"</span><span style="color: #007700">;</span><span style="color: #FF8000">//ulkoasufunktiot&nbsp;käyttöön<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">"./tietokanta/yhteys.php"</span><span style="color: #007700">;</span><span style="color: #FF8000">//tietokantayhteys&nbsp;käyttöön<br /></span><span style="color: #007700">require&nbsp;</span><span style="color: #DD0000">"./tietokanta/tkfunktiot.php"</span><span style="color: #007700">;</span><span style="color: #FF8000">//tietokantafuntiot&nbsp;käyttöön<br /><br /></span><span style="color: #0000BB">tulosta_admin_alku</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">tulosta_admin_sisalto</span><span style="color: #007700">(</span><span style="color: #0000BB">$sivu</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">tulosta_admin_loppu</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></p>

</div>

<script type="text/javascript" src="footer.js"> </script>