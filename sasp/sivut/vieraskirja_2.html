  <!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vieraskirja (1)</title>
	<LINK REL=stylesheet type="text/css" href="style.css">
</head>

<script type="text/javascript" src="header2.js"> </script>
<div id="sisalto">
<h1>2. Suunnitelma</h1>
<ol>
<li><a href="vieraskirja_1.html">tehtävä</a></li>
<li><a href="vieraskirja_2.html">suunnitelma</a></li>
<li><a href="vieraskirja_3.html">tietokannan toteutus</a></li>
<li><a href="vieraskirja_4.html">käyttöliittymä</a></li>
<li><a href="vieraskirja_5.html">runko järjestelmään</a></li>
<li><a href="vieraskirja_6.html">tietojen lisäys lukijan näkymässä</a></li>
<li><a href="vieraskirja_7.html">autentikointi</a></li>
<li><a href="vieraskirja_8.html">jutun lisäys ylläpitonäkymässä</a></li>
<li><a href="vieraskirja_9.html">tietojen haku lukijan näkymässä</a></li>
<li><a href="vieraskirja_10.html">tietojen haku ylläpitonäkymässä</a></li>
<li><a href="vieraskirja_11.html">lisäykset</a></li>

</ol>
<h2>Tietokannasta</h2>
<p>Malliesimerkissä käytetään kahta taulua: juttu ja kayttaja.</p>
<h3>juttu</h3>
<ul>
<li>jid int(6) auto_increment (on siis autonumber tai laskuri-tyyppinen), pääavain</li>
<li>otsikko varchar(100)</li>
<li>kpl text</li>
<li>poistamispvm date NOT NULL</li>
<li>lisayspvm date</li>
<li>kid int(6)</li>
</ul>

<h3>kayttaja</h3>
<ul>
<li>kid int(6) auto_increment (on siis autonumber tai laskuri-tyyppinen)</li>
<li>sukunimi varchar(30)</li>
<li>etunimi varchar(30)</li>
<li>ktunnus varchar(30)</li>
<li>salasana varchar(100)</li>
</ul>

<p>Mallijärjestelmään tulevat seuraavat tiedostot</p>
<h3>Yhteiset tiedostot</h3>
<ol>
<li>yhteys.php
<li>tkfunktiot.php (sisältää tietokantaliittymää käsitteleviä funktioita), lista päivittyy koko ajan, kun etenee työssä</li>
	<ul>
	<li>tunnusta_ei_kannassa($ktunnus)</li>
	<li>hae_id_kannasta($salasana,$ktunnus)</li>
	<li>hae_kirjoittajan_nimi($id)</li>
	</ul>
</li>
<li>funktiot.php (sisältää kaikki muut apufunktiot), lista on alustava ja sitä on syytä päivittää, kun etenee työssä
	<ul>
	<li>muunna_salasana($salasana)</li>
	<li>muunna_pvm($pvm)</li>
	<li>putsaa($sana)</li>
	</ul>
</li>
<li>asenna.php (luo tarvittavat tietokannan taulut)</li>

<h3>Lukijan näkymä</h3>
<li>index.php</li>
<li>etusivu.php (sisällytetään lukijan näkymässä, näyttää 5 viimeistä juttua)</li>
<li>kirjoittajan_jutut.php (sisällytetään lukijan näkymässä, näyttää yhden kirjoittajan kaikki jutut)</li>
<li>juttu.php (sisällytetään lukijan näkymässä, näyttää yhden jutun)</li>
<li>rekisteroidy.php (sisällytetään lukijan näkymässä, tulostaa lomakkeen sekä lomakkeenkäsittelijän rekisteröitymiseen)</li>
<li>kirjaudu.php (sisällytetään lukijan näkymässä, kutsutaan linkistä)</li>
<li>alku.php, sisällytetään lukijan index-sivun alkuun, sisältää html-alun sekä linkin kirjautumiseen ja rekisteröitymiseen</li>
<li>loppu.php, sisällytetään lukijan index-sivun loppuun, sisältää html-lopun</li>


<h3>Siirtyminen ylläpitoon</h3>
<li>tarkista_kirjautuminen.php (kirjautumislomake kutsuu ko. tiedostoa, jos tiedot ok, ohjaa admin.php:hen, jos ei, takaisin index.php-sivulle)</li>

<h3>Ylläpitonäkymä</h3>
<li>admin.php</li>
<li>admin_etusivu.php (sisällytetään ylläpidon näkymässä, näyttää kirjoittajan omat jutut, joissa myös muokkaa- ja poista-linkki)</li>
<li>lisaa_juttu (sisällytetään ylläpidon näkymässä, tulostaa lomakkeen sekä lomakkeenkäsittelijän jutun lisäämiseen)</li>
<li>muokkaa_juttua (sisällytetään ylläpidon näkymässä, tulostaa lomakkeen sekä lomakkeenkäsittelijän jutun poistamiseen tai muokkaamiseen)</li>
<li>muokkaa_omia_tietoja (sisällytetään ylläpidon näkymässä, tulostaa lomakkeen sekä lomakkeenkäsittelijän omiej tietojen muokkaamiseen)</li>
<li>admin_alku.php (sisällytetään kirjoittajan ylläpito-sivun alkuun sisältää html-alun, kirjoittajan nimen sekä linkin uloskirjautumiseen, jutun lisäämiseen ja omien tietojen muuttamiseen)</li>
<li>admin_loppu.php, sisällytetään lukijan index-sivun loppuun, sisältää html-lopun</li>

<h3>Siirtyminen lukijan näkymään</h3>
<li>kirjaudu_ulos (kutsu linkkinä jokaisella ylläpitonäkymän sivulla)</li>
</ol>


</div>

<script type="text/javascript" src="footer.js"> </script>